websocket：

	起源是因为http请求只能客户端发起
	最大的特点就是可以由客户端和服务端双向发起

	其他特点包括：
	（1）建立在 TCP 协议之上，服务器端的实现比较容易。
	（2）与 HTTP 协议有着良好的兼容性。默认端口也是80和443，并且握手阶段采用 HTTP 协议，因此握手时不容易屏蔽，能通过各种 HTTP 代理服务器。
	（3）数据格式比较轻量，性能开销小，通信高效。
	（4）可以发送文本，也可以发送二进制数据。
	（5）没有同源限制，客户端可以与任意服务器通信。
	（6）协议标识符是ws（如果加密，则为wss），服务器网址就是 URL。
         过程：先通过http协议进行握手链接，然后升级协议成websocket
互联网协议：

	最底层的以太网协议（Ethernet）规定了电子信号如何组成数据包（packet），解决了子网内部的点对点通信。
	IP 协议定义了一套自己的地址规则，称为 IP 地址。它实现了路由功能，允许某个局域网的 A 主机，向另一个局域网的 B 主机发送消息。

	http://www.ruanyifeng.com/blog/2012/05/internet_protocol_suite_part_i.html（阮一峰）

	新加入的计算机不知道自己的IP地址、子网掩码、网关地址、DNS服务器等等参数。
	dhcp协议：
		以太网标头写自己的mac地址 对方的写FF-FF-FF-FF-FF-FF
		IP发送方写0.0.0.0 接收方写255.255.255.255
		双方端口号发出68 接受67

		dhcp服务器接收到之后就知道是给自己发送的包，其他人可以丢弃。然后分配，返回响应包。

输入地址敲击回车都发生了什么：

	查找本机host，如果没有向dns服务器，返回ip地址

	根据子网掩码判断是否在同一个子网络，如果不在需要通过网关转发

	tcp为本机设置一个端口 然后嵌入ip包写入发送/接收方ip地址 然后嵌入以太网写入双方mac地址 1500字节一个包

	Google接受到之后把数据包拼接，读出里面的http请求，然后找到nginx服务器 .php解析动态语言调用执行php脚本fastcgi_pass将用户请求发送给fastcgi（注1），如果是静态资源nginx直接返回，fastcgi将资源给php解释器wrpper，然后返回结果集，在浏览器渲染。
	
	（注1）fastCgi 会先启一个 master，解析配置文件，初始化执行环境，然后再启动多个worker。当请求过来时，master会传递给一个worker，然后立即可以接受下一个请求。这样就避免了重复的劳动，效率自然是高。而且当worker不够用时，master可以根据配置预先启动几个worker等着；当然空闲worker太多时，也会停掉一些，这样就提高了性能，也节约了资源。这就是 fastCgi 对进程的管理。
	（注2）php-fpm是fastcgi的管理器，负责调度


	到达服务器整体工作流程：
    1)、php-fpm自身初始化，启动主进程php-fpm和启动start_servers个CGI子进程。主进程php-fpm主要是管理fastcgi子进程，监听9000端口。fastcgi子进程等待来自Web Server的连接。
    2)、当客户端请求到达Web Server Nginx是时，Nginx通过location指令，将所有以php为后缀的文件都交给127.0.0.1:9000来处理，即Nginx通过		location指令，将所有以php为后缀的文件都交给127.0.0.1:9000来处理。
	3)、FastCGI进程管理器PHP-FPM选择并连接到一个子进程CGI解释器。Web server将CGI环境变量和标准输入发送到FastCGI子进程。
	4)、FastCGI子进程完成处理后将标准输出和错误信息从同一连接返回Web Server。当FastCGI子进程关闭连接时，请求便告处理完成。
	5)、FastCGI子进程接着等待并处理来自FastCGI进程管理器（运行在 WebServer中）的下一个连接。

进程和线程：
	单核cpu在任何时候都只能运行一个进程。一个进程可以包括多个线程

HTTPS:
	作用：加密传输的数据
	对称加密：使用对称加密技术，使得客户端和服务器都能加密解密
	非对称加密：服务器可以生成一对不同的密钥（所谓非对称），一把私自保存，称为私钥；一把向所有人公开，称为公钥这对密钥有这样的性质公钥加密后的数据只有私钥能解密，私钥加密后的数据只有公钥能解密

	问：如何在通信前，分配钥匙？

	答：客户端在每次请求通信之前，先和服务器协商，通过某种办法，产生只有双方知道的对称密钥这个过程就是所谓：密钥交换(Key Exchange)

	RSA：RSA密钥交换算法需要客户端向服务器提供一个Pre-Master-Key，然后通信双方再生成Master-Key，最后根据Master-Key产生后续一系列所需要的密钥，包括传输数据的时候使用的对称密钥

	问：如何安全的传输Pre-Master-Key？

	答：客户端把Pre-Master-Key用服务器的公钥加密后，传送给服务器因为只有服务器才有私钥，所以只有服务器才能解密数据，获取客户端发送来的 Pre-Master-Key

	具体的交互过程：

		客户端向服务器索取公钥 PublicKey；
		服务器将公钥发给客户端（这里没有保密需求，因为公钥是向所有人公开的）；
		客户端使用服务器的公钥 PublicKey 把 Pre-Master-Key 加密成密文，传送给服务器；
		服务器用私钥 PrivateKey 解密密文，获取到客户端发送的 Pre-Master-Key;

	问：步骤2是面向所有人，可能被劫持，怎么办？

	答：服务器会根据域名，公钥等在权威部门搞一个证书，证书如果有效，说明公钥可信

	问：如何证明证书有效？

	答：只要服务器发送的证书上有权威机构 Authority 的签名，就可以确信证书是颁发给服务器的，而不是谁伪造的

	问：签名如何生成？

	答：数字证书认证机构（Certificate Authority，简称 CA）生成一对公/私钥；
		服务器将自己的域名、公钥等信息提交给 CA 审查；
		CA 审查无误，使用私钥把服务器信息的摘要加密，生成的密文就是所谓签名（Signature）；
		CA 把服务器的信息、签名、有效期等信息集合到一张证书上，颁发给服务器；
		客户端收到服务器发送的证书后，使用CA的公钥解密签名，获得服务器信息的摘要，如果和证书上记录的服务器信息的摘要一致，说明服务器信息是经过 CA 认可的